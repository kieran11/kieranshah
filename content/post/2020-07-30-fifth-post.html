---
title: Survival Analysis
author: ''
date: '2020-07-27'
slug: fifth-post
categories:
  - R
tags: []
---



<div id="weather-data" class="section level2">
<h2>Weather Data</h2>
<p>Many epidemiological experts have linked weather to rising or falling Covid-19 cases. The first two steps of the process of getting data is as follows:</p>
<ol style="list-style-type: decimal">
<li><p>The Covid-19 cases by county in the United States (US) can be found <a href="https://kjhealy.github.io/covdata/">here:</a>.</p></li>
<li><p>The weather data comes from Darksky. We use the package <code>darksky</code>. <code>darksky</code> is a wrapper for the API DarkSky provides.</p></li>
</ol>
<p>The package <code>darksky</code> and its documentation is <a href="https://github.com/hrbrmstr/darksky">here:</a>. Importantly, the API will shutdown at the end of 2021.</p>
<p>In order to get the weather for each county for a given day, we need the longitude and latitude for each of the counties. The dataset with every longitude and latitude in a given county is provided by the Open Data initiative of the U.S. Government. The complete raw dataset can be downloaded <a href="https://data.healthcare.gov/dataset/Geocodes-USA-with-Counties/52wv-g36k">here:</a>. To get a longitude and latitude for each county, we just take the means by county. It is not a perfect estimation for weather, but depending on the geographical size of the county, it should work well.</p>
<pre class="r"><code>library(covdata)
library(tidyverse)
library(darksky)
library(ggmap)
## Darksky API: 
DS = &quot;Weather API&quot;
darksky_api_key(DS)
## google maps API: 
GoogleAPI = &quot;API Key&quot;
register_google(key = GoogleAPI)

longlat = readr::read_csv(&quot;C:/Users/Kieran Shah/Downloads/Geocodes_USA_with_Counties.csv&quot;) %&gt;% 
  filter(!is.na(county)) %&gt;% 
  group_by(county, state) %&gt;% 
  summarise(long = mean(longitude ),
            lat = mean(latitude)) %&gt;% 
  ungroup()

st_crosswalk &lt;- tibble(state = state.name) %&gt;%
  bind_cols(tibble(abb = state.abb)) %&gt;% 
  bind_rows(tibble(state = &quot;District of Columbia&quot;, abb = &quot;DC&quot;))

IndlCounties = nytcovcounty %&gt;% 
  distinct(county, state) %&gt;% 
  inner_join(st_crosswalk, by = &quot;state&quot;) %&gt;% 
  inner_join(longlat, by = c(&quot;county&quot; = &quot;county&quot;, &quot;abb&quot; = &quot;state&quot;)) %&gt;% 
  inner_join(nytcovcounty , by = c(&quot;county&quot;, &quot;state&quot;)) %&gt;%
  filter(lubridate::month(date) %in% c(3,4,5,6) ) %&gt;% 
  mutate(timeStamp = paste0(date, &quot;T13:00:00&quot;)) %&gt;%  
  mutate(TempData = purrr::pmap(list(lat, long, timeStamp), get_forecast_for, 
                                header = TRUE, 
                                exclude = &quot;currently,minutely,hourly,alerts,flags&quot;))

IndlCountiesUnnest = IndlCounties %&gt;%
  mutate(Data2Weather = purrr::map(TempData, ~ .x$daily %&gt;% 
                                     select(temperatureMax , temperatureLow, 
                                                            precipProbability , precipIntensity))) %&gt;% 
  tidyr::unnest(c(Data2Weather))</code></pre>
</div>
<div id="other-predictors" class="section level2">
<h2>Other predictors:</h2>
<p>There are many factors which are associated with rising, or declining Covid-19 cases. This post cannot get all of the predictors. Furthermore, all the relevant predictors are probably unknown at this time.</p>
<p>To get other predictors, we use the package <code>tidycensus</code>. After registering for an API key, you can check all the variables in the American Community Survey (ACS) with the <code>load_variables</code> function.</p>
<p>I pulled median age and median income for this analysis.</p>
<p>The weather data, Covid-19 data, and ACS data are then combined together.</p>
<pre class="r"><code>library(dplyr)

tidycensus::census_api_key(&quot;API Key&quot;)
v17 &lt;- tidycensus::load_variables(2017, &quot;acs5&quot;, cache = TRUE)

MedianAgeCounty &lt;- tidycensus::get_acs(geography = &quot;county&quot;,
                                       variables = c(MedianAge = &quot;B01002_001&quot;),
                                       #state = &quot;VT&quot;,
                                       year = 2017)

Poverty = tidycensus::get_acs(geography = &quot;county&quot;,
                              variables = c(MedianIncome = &quot;B17020_001&quot;),
                              #state = &quot;VT&quot;,
                              year = 2017)

ExtaVariables = inner_join(Poverty %&gt;% 
                             select(MedianIncome = estimate, GEOID), 
                           MedianAgeCounty %&gt;% 
                             select(GEOID, NAME, MedianAge = estimate ), by = &quot;GEOID&quot;)</code></pre>
</div>
<div id="focus-on-california" class="section level2">
<h2>Focus on California</h2>
<p>While using the entire U.S. dataset provides the greatest amount of variation, there are 50 state governments provided different policies. In order to isolate government policy without researching every 50 state policies, we can focus on California. California has both a lot of variation in temperatures and cases by county, it provides an interesting case study.</p>
<p>California has opened up to Stage 3 as of July 22.</p>
<ol style="list-style-type: decimal">
<li>California closed for shelter-at-home on March 19, 2020.</li>
<li>California opened for stage 2 on May 8, 2020.</li>
<li>California opened for stage 3 on June June 12, 2020.</li>
</ol>
<p>An important caveat is that some of the openings are based on meeting county thresholds.</p>
<p>The first step is to create multiple lags for weather. Covid-19 cases will show up after temperature changes. To do so, we follow <a href="https://purrple.cat/blog/2018/03/02/multiple-lags-with-tidy-evaluation/">this</a> blog post.</p>
<pre class="r"><code>lags &lt;- function(var, n=10){
  var &lt;- enquo(var)
  
  indices &lt;- seq_len(n)
  purrr::map( indices, ~quo(lag(!!var, !!.x)) ) %&gt;% 
    purrr::set_names(sprintf(&quot;lag_%s_%02d&quot;, quo_text(var), indices))
  
}</code></pre>
</div>
<div id="basic-correlations" class="section level2">
<h2>Basic Correlations:</h2>
<p>Next, we take a look at the data. How do the scatter plots look comparing Covid-19 cases and the four different weather variables.</p>
<ol style="list-style-type: decimal">
<li>Max Temperature:</li>
</ol>
<p><img src="/post/2020-07-30-fifth-post_files/figure-html/pltTemp-1.png" width="672" /></p>
<p>The below table shows the distribution by range of max temperature. The rows are the number of days in lags. The columns are the temperature ranges.</p>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#pkcsgqdatr .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pkcsgqdatr .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pkcsgqdatr .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pkcsgqdatr .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pkcsgqdatr .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pkcsgqdatr .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pkcsgqdatr .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pkcsgqdatr .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pkcsgqdatr .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pkcsgqdatr .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pkcsgqdatr .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pkcsgqdatr .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#pkcsgqdatr .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pkcsgqdatr .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pkcsgqdatr .gt_from_md > :first-child {
  margin-top: 0;
}

#pkcsgqdatr .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pkcsgqdatr .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pkcsgqdatr .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#pkcsgqdatr .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pkcsgqdatr .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#pkcsgqdatr .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pkcsgqdatr .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pkcsgqdatr .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pkcsgqdatr .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pkcsgqdatr .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#pkcsgqdatr .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pkcsgqdatr .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#pkcsgqdatr .gt_left {
  text-align: left;
}

#pkcsgqdatr .gt_center {
  text-align: center;
}

#pkcsgqdatr .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pkcsgqdatr .gt_font_normal {
  font-weight: normal;
}

#pkcsgqdatr .gt_font_bold {
  font-weight: bold;
}

#pkcsgqdatr .gt_font_italic {
  font-style: italic;
}

#pkcsgqdatr .gt_super {
  font-size: 65%;
}

#pkcsgqdatr .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="pkcsgqdatr" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_center gt_columns_bottom_border" rowspan="2" colspan="1">TempDaySince</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="5">
        <span class="gt_column_spanner">Range</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">[27,59.3]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(59.3,66.8]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(66.8,74.1]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(74.1,83]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(83,112]</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_right">5</td>
      <td class="gt_row gt_right">24.0</td>
      <td class="gt_row gt_right">60.5</td>
      <td class="gt_row gt_right">104.5</td>
      <td class="gt_row gt_right">163.5</td>
      <td class="gt_row gt_right">316.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">6</td>
      <td class="gt_row gt_right">27.0</td>
      <td class="gt_row gt_right">66.0</td>
      <td class="gt_row gt_right">106.0</td>
      <td class="gt_row gt_right">171.0</td>
      <td class="gt_row gt_right">325.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">7</td>
      <td class="gt_row gt_right">30.0</td>
      <td class="gt_row gt_right">74.0</td>
      <td class="gt_row gt_right">110.0</td>
      <td class="gt_row gt_right">175.0</td>
      <td class="gt_row gt_right">337.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">8</td>
      <td class="gt_row gt_right">33.0</td>
      <td class="gt_row gt_right">80.5</td>
      <td class="gt_row gt_right">116.0</td>
      <td class="gt_row gt_right">184.0</td>
      <td class="gt_row gt_right">349.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">9</td>
      <td class="gt_row gt_right">34.0</td>
      <td class="gt_row gt_right">87.0</td>
      <td class="gt_row gt_right">120.0</td>
      <td class="gt_row gt_right">184.0</td>
      <td class="gt_row gt_right">358.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">10</td>
      <td class="gt_row gt_right">36.5</td>
      <td class="gt_row gt_right">95.0</td>
      <td class="gt_row gt_right">126.0</td>
      <td class="gt_row gt_right">178.0</td>
      <td class="gt_row gt_right">358.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">11</td>
      <td class="gt_row gt_right">39.0</td>
      <td class="gt_row gt_right">102.0</td>
      <td class="gt_row gt_right">137.5</td>
      <td class="gt_row gt_right">177.5</td>
      <td class="gt_row gt_right">367.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">12</td>
      <td class="gt_row gt_right">41.0</td>
      <td class="gt_row gt_right">105.0</td>
      <td class="gt_row gt_right">140.0</td>
      <td class="gt_row gt_right">172.0</td>
      <td class="gt_row gt_right">375.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">13</td>
      <td class="gt_row gt_right">42.0</td>
      <td class="gt_row gt_right">110.0</td>
      <td class="gt_row gt_right">145.0</td>
      <td class="gt_row gt_right">176.5</td>
      <td class="gt_row gt_right">386.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">14</td>
      <td class="gt_row gt_right">44.0</td>
      <td class="gt_row gt_right">113.0</td>
      <td class="gt_row gt_right">149.0</td>
      <td class="gt_row gt_right">187.5</td>
      <td class="gt_row gt_right">389.0</td>
    </tr>
  </tbody>
  
  
</table></div>
<p>Both the plots and the table above show that the lag and the higher temperatures seem to be correlated with higher cases. The greater the lag the more cases, and the greater the temperature, the greater the new cases.</p>
<ol start="2" style="list-style-type: decimal">
<li>Precipitation Probability:</li>
</ol>
<p><img src="/post/2020-07-30-fifth-post_files/figure-html/pltprecipprob-1.png" width="672" /></p>
<p>The below table shows the distribution by range of max temperature.</p>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#wqalsjebpg .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wqalsjebpg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wqalsjebpg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wqalsjebpg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wqalsjebpg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wqalsjebpg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wqalsjebpg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wqalsjebpg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wqalsjebpg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wqalsjebpg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wqalsjebpg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wqalsjebpg .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#wqalsjebpg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wqalsjebpg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wqalsjebpg .gt_from_md > :first-child {
  margin-top: 0;
}

#wqalsjebpg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wqalsjebpg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wqalsjebpg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#wqalsjebpg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wqalsjebpg .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#wqalsjebpg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wqalsjebpg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wqalsjebpg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wqalsjebpg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wqalsjebpg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#wqalsjebpg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wqalsjebpg .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#wqalsjebpg .gt_left {
  text-align: left;
}

#wqalsjebpg .gt_center {
  text-align: center;
}

#wqalsjebpg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wqalsjebpg .gt_font_normal {
  font-weight: normal;
}

#wqalsjebpg .gt_font_bold {
  font-weight: bold;
}

#wqalsjebpg .gt_font_italic {
  font-style: italic;
}

#wqalsjebpg .gt_super {
  font-size: 65%;
}

#wqalsjebpg .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="wqalsjebpg" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_center gt_columns_bottom_border" rowspan="2" colspan="1">TempDaySince</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="5">
        <span class="gt_column_spanner">Range</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">[0,0.02]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(0.02,0.04]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(0.04,0.09]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(0.09,0.37]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(0.37,1]</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_right">5</td>
      <td class="gt_row gt_right">270.0</td>
      <td class="gt_row gt_right">113.0</td>
      <td class="gt_row gt_right">91.0</td>
      <td class="gt_row gt_right">49.5</td>
      <td class="gt_row gt_right">35</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">6</td>
      <td class="gt_row gt_right">273.5</td>
      <td class="gt_row gt_right">118.0</td>
      <td class="gt_row gt_right">94.5</td>
      <td class="gt_row gt_right">52.0</td>
      <td class="gt_row gt_right">39</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">7</td>
      <td class="gt_row gt_right">278.0</td>
      <td class="gt_row gt_right">123.5</td>
      <td class="gt_row gt_right">97.0</td>
      <td class="gt_row gt_right">53.0</td>
      <td class="gt_row gt_right">41</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">8</td>
      <td class="gt_row gt_right">285.5</td>
      <td class="gt_row gt_right">129.0</td>
      <td class="gt_row gt_right">101.5</td>
      <td class="gt_row gt_right">55.0</td>
      <td class="gt_row gt_right">44</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">9</td>
      <td class="gt_row gt_right">291.5</td>
      <td class="gt_row gt_right">136.0</td>
      <td class="gt_row gt_right">104.0</td>
      <td class="gt_row gt_right">62.0</td>
      <td class="gt_row gt_right">48</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">10</td>
      <td class="gt_row gt_right">297.0</td>
      <td class="gt_row gt_right">129.0</td>
      <td class="gt_row gt_right">108.0</td>
      <td class="gt_row gt_right">71.0</td>
      <td class="gt_row gt_right">50</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">11</td>
      <td class="gt_row gt_right">301.0</td>
      <td class="gt_row gt_right">129.0</td>
      <td class="gt_row gt_right">110.0</td>
      <td class="gt_row gt_right">77.5</td>
      <td class="gt_row gt_right">54</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">12</td>
      <td class="gt_row gt_right">309.0</td>
      <td class="gt_row gt_right">140.0</td>
      <td class="gt_row gt_right">112.0</td>
      <td class="gt_row gt_right">82.0</td>
      <td class="gt_row gt_right">64</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">13</td>
      <td class="gt_row gt_right">312.0</td>
      <td class="gt_row gt_right">140.0</td>
      <td class="gt_row gt_right">112.0</td>
      <td class="gt_row gt_right">89.0</td>
      <td class="gt_row gt_right">71</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">14</td>
      <td class="gt_row gt_right">317.0</td>
      <td class="gt_row gt_right">145.0</td>
      <td class="gt_row gt_right">116.0</td>
      <td class="gt_row gt_right">100.0</td>
      <td class="gt_row gt_right">77</td>
    </tr>
  </tbody>
  
  
</table></div>
<ol start="3" style="list-style-type: decimal">
<li>Precipitation Intensity:</li>
</ol>
<p><img src="/post/2020-07-30-fifth-post_files/figure-html/pltprecipint-1.png" width="672" /></p>
<p>The below table shows the distribution by range of max temperature.</p>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#wlzakegcxt .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wlzakegcxt .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wlzakegcxt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wlzakegcxt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wlzakegcxt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wlzakegcxt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wlzakegcxt .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wlzakegcxt .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wlzakegcxt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wlzakegcxt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wlzakegcxt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wlzakegcxt .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#wlzakegcxt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wlzakegcxt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wlzakegcxt .gt_from_md > :first-child {
  margin-top: 0;
}

#wlzakegcxt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wlzakegcxt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wlzakegcxt .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#wlzakegcxt .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wlzakegcxt .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#wlzakegcxt .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wlzakegcxt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wlzakegcxt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wlzakegcxt .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wlzakegcxt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#wlzakegcxt .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wlzakegcxt .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#wlzakegcxt .gt_left {
  text-align: left;
}

#wlzakegcxt .gt_center {
  text-align: center;
}

#wlzakegcxt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wlzakegcxt .gt_font_normal {
  font-weight: normal;
}

#wlzakegcxt .gt_font_bold {
  font-weight: bold;
}

#wlzakegcxt .gt_font_italic {
  font-style: italic;
}

#wlzakegcxt .gt_super {
  font-size: 65%;
}

#wlzakegcxt .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="wlzakegcxt" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_center gt_columns_bottom_border" rowspan="2" colspan="1">TempDaySince</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="5">
        <span class="gt_column_spanner">Range</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">[0,0.0004]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(0.0004,0.0006]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(0.0006,0.0008]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(0.0008,0.0022]</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">(0.0022,0.139]</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_right">5</td>
      <td class="gt_row gt_right">525.0</td>
      <td class="gt_row gt_right">160.0</td>
      <td class="gt_row gt_right">54.0</td>
      <td class="gt_row gt_right">45.0</td>
      <td class="gt_row gt_right">33.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">6</td>
      <td class="gt_row gt_right">547.5</td>
      <td class="gt_row gt_right">163.0</td>
      <td class="gt_row gt_right">55.0</td>
      <td class="gt_row gt_right">47.0</td>
      <td class="gt_row gt_right">34.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">7</td>
      <td class="gt_row gt_right">564.0</td>
      <td class="gt_row gt_right">172.0</td>
      <td class="gt_row gt_right">56.0</td>
      <td class="gt_row gt_right">50.0</td>
      <td class="gt_row gt_right">36.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">8</td>
      <td class="gt_row gt_right">578.5</td>
      <td class="gt_row gt_right">177.0</td>
      <td class="gt_row gt_right">58.5</td>
      <td class="gt_row gt_right">52.0</td>
      <td class="gt_row gt_right">40.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">9</td>
      <td class="gt_row gt_right">587.0</td>
      <td class="gt_row gt_right">186.0</td>
      <td class="gt_row gt_right">62.5</td>
      <td class="gt_row gt_right">54.0</td>
      <td class="gt_row gt_right">42.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">10</td>
      <td class="gt_row gt_right">579.0</td>
      <td class="gt_row gt_right">188.0</td>
      <td class="gt_row gt_right">66.5</td>
      <td class="gt_row gt_right">55.0</td>
      <td class="gt_row gt_right">44.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">11</td>
      <td class="gt_row gt_right">595.0</td>
      <td class="gt_row gt_right">193.0</td>
      <td class="gt_row gt_right">67.0</td>
      <td class="gt_row gt_right">57.0</td>
      <td class="gt_row gt_right">47.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">12</td>
      <td class="gt_row gt_right">595.0</td>
      <td class="gt_row gt_right">194.5</td>
      <td class="gt_row gt_right">70.0</td>
      <td class="gt_row gt_right">61.5</td>
      <td class="gt_row gt_right">50.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">13</td>
      <td class="gt_row gt_right">587.0</td>
      <td class="gt_row gt_right">199.0</td>
      <td class="gt_row gt_right">74.5</td>
      <td class="gt_row gt_right">64.0</td>
      <td class="gt_row gt_right">54.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_right">14</td>
      <td class="gt_row gt_right">589.0</td>
      <td class="gt_row gt_right">199.0</td>
      <td class="gt_row gt_right">79.0</td>
      <td class="gt_row gt_right">67.0</td>
      <td class="gt_row gt_right">62.0</td>
    </tr>
  </tbody>
  
  
</table></div>
<p>Both the precipitation probability, and the precipitation intensity show a similar pattern. Greater amounts of rain are associated with fewer cases, and the greater the lag of precipation probability of intensity, the greater the number of cases.</p>
</div>
<div id="cases-and-stage-openings" class="section level2">
<h2>Cases and Stage Openings:</h2>
<p>The plot below shows the change in new cases over time. The background colours show the period of each stage. For the pre-lockdown, the background is red.</p>
<p><img src="/post/2020-07-30-fifth-post_files/figure-html/CasesStagePlt-1.png" width="672" /></p>
<p>The next plot shows the same idea, but instead of showing the stages, it shows the seven day lag since the new stage of lockdown was imposed.</p>
<p><img src="/post/2020-07-30-fifth-post_files/figure-html/CasesStagePlt1-1.png" width="672" /></p>
<p>Finally, the plot below shows the twelve day lag since the last stage of lockdown occurred. It is important to note that we do not have enough data to do the 14 day lag.</p>
<p><img src="/post/2020-07-30-fifth-post_files/figure-html/CasesStagePlt2-1.png" width="672" /></p>
<p>Overall, it looks like the one week plot is the most predictive, but this is simply just a visually inspection.</p>
</div>
